module.exports = Object.assign(extend, {
    options: ['--username', '--directory', '--subdomain', '--passcode'],
    shortcuts: ['-u', '-d', '-s', '-p'],
    help: `
# SYNOPSIS

    *cds extend* [ <url> ]

   Create an extension project from url [url]


# OPTIONS

    *-d* | *--directory* <directory>
    
        The target directory.

    *-s* | *--subdomain* <subdomain>
    
        The subdomain to extend.
        
    *-p* | *--passcode* <passcode>
    
        The passcode for authentication

    *-u* | *--username* <name> 

        Deprecated. Use passcode parameter instead.
        
`})


async function extend ([url], options = {}) {

    try {
        const client = require('@sap/cds-sidecar-client')
        const askQuestion = client.question.askQuestion

        if (!url) {
            url = await askQuestion('Extension Url: ');
        }

        if (options.username && !options.passcode) {
            options.password = await askQuestion('Password: ', undefined, true)
        }

        client.extend(url, options)
    } catch (e) {
        console.log('This feature requires cds-sidecar-client to be installed')
    }

}



/* eslint no-console: off */
