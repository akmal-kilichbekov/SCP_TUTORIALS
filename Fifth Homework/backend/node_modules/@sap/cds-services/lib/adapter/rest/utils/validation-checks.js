const { processDeep } = require('../../../util/dataProcessUtils')
const { checkStatic } = require('../../../util/assert')
const combineErrors = require('../../../errors/combineErrors')
module.exports = (data, target) => {
  const checkResult = []
  const staticChecker = (entry, entity) => {
    checkResult.push(...checkStatic(entity, entry))
  }
  processDeep(staticChecker, data, target, false, true)

  const error = combineErrors(checkResult)
  if (error) error.statusCode = 400

  return error
}
